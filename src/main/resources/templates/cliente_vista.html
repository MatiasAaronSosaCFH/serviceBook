<!DOCTYPE html>
<html lang="en" data-bs-theme="auto" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
  <th:head th:replace="./fragments/head.html :: head"></th:head>

  <body class="bg-gradient" style="background-image: linear-gradient(180deg, #e76b74  #D7AF70)">

    <th:header th:replace="./fragments/header.html :: header"></th:header>


    <div class="container-fluid m-0 p-0 g-0 w-100 contenedor">
      <div class="row p-0 m-0 g-0 w-100">
          <div class="col-1"></div>
          <div class="col-10">
              <div class="table_header">
                  <h1 class="py-5 mb-1 text-center">Trabajos ServiceBook</h1>
              </div>
              <table class="table table-bordered table-striped-columns border-primary table-hover">
                  <thead class="table-dark">
                      <tr>
                          <th class="text-center" scope="col">Id</th>
                          <th class="text-center" scope="col">Cliente</th>
                          <th class="text-center" scope="col">Proveedor</th>
                          <th class="text-center" scope="col">Titulo</th>
                          <th class="text-center" scope="col">Fecha</th>
                          <th class="text-center" scope="col">Horas</th>
                          <th class="text-center" scope="col">Alta/Baja</th>
                          <!-- <th class="text-center" scope="col">Costo Estimado</th> -->
                          <th class="text-center" scope="col">Aceptacion Cliente</th>
                          <th class="text-center" scope="col">Termino Proveedor</th>
                          <th class="text-center" scope="col">Termino Cliente</th>
                          <!-- <th class="text-center" scope="col">Calificacion</th> -->
                          <!-- <th class="text-center" scope="col">Descripcion</th> -->
                          <th class="text-center" scope="col">Ver Trabajo</th>
                      </tr>
                  </thead>
                  <tbody th:each="trabajo : ${trabajos}">
                      <tr>
                          <td class="text-center" th:text="${trabajo.id}"></td>
                          <td class="text-center" th:text="${trabajo.cliente.id}"></td>
                          <td class="text-center" th:text="${trabajo.proveedor.id}"></td>
                          <td class="text-center" th:text="${trabajo.tituloTrabajo}"></td>
                          <td class="text-center" th:text="${trabajo.fechaTrabajo}"></td>
                          <td class="text-center" th:text="${trabajo.horasTrabajo}" ></td>
                          <td class="text-center" th:text="${trabajo.alta}"></td>
                          <!-- <td class="text-center" th:value=#>costo=horasXPrecio</td> -->
                          <td class="text-center" th:text="${trabajo.estaAceptadoCliente}"></td>
                          <td class="text-center" th:text="${trabajo.terminoProveedor}"></td>
                          <td class="text-center" th:text="${trabajo.terminoCliente}"></td>
                          <!-- <td class="text-center" th:text="${trabajo.calificaion}"></td> -->
                          <!-- <td class="text-center" th:text="${trabajo.Descripcion}"></td> -->
                          <td>
                            <form action="/trabajo/listaCliente" method="POST">
                              <input hidden name="idTrabajo" th:value="${trabajo.id}">
                              <input hidden name="idProveedor" th:value="${trabajo.proveedor.id}">
                              <button type="submit" class="btn btn-ver-trabajo">
                                <img src="../../img/edit.png" alt="editar perfil">
                              </button>
                            </form>
                          </td>
                      </tr>
                  </tbody>
              </table>
          </div>
      </div>
      <div class="col-1"></div>
  </div>

  <main id="main-content" th:if="${verificacion != null}">
    
    <th:div th:replace="./fragments/exitoError.html :: div"></th:div>

    <h1 class="fw-light bienvenido text-center">Cliente ServiceBook</h1>

    <div class="container-fluid m-5 contenedor">
        
      <div>
       <div class="row">
        
        <div class="col-5">
          <form class="formulario" th:action="@{/trabajo/crearTrabajo}" method="POST" enctype="multipart/form-data">
            <div class="form-group my-3">
                <!-- <label class="mb-2">Usuario Id</label>
                <b th:text="${usuario.id}"></b></label><br> -->
                <input hidden  th:value="${usuario.id}" type="text" class="form-control" name="idCliente">                    
                <label class="mb-2">Fecha: </label>
                <b th:text="${trabajo.fechaTrabajo}"></b></label><br>
                <label class="mb-2">Usted esta contratando a: </label>
                <b th:text="${proveedor.nombre}"></b></label><br>
                <input hidden th:value="${proveedor.id}" type="text" class="form-control" name="idProveedor">                    
                <label class="mb-2">Titulo</label>
                <input type="text" class="form-control" th:value="${trabajo.tituloTrabajo}" name="tituloTrabajo" placeholder="titulo del trabajo">
                <label class="mb-2">Horas de Trabajo</label>
                <input type="text" class="form-control" name="horasTrabajo" placeholder="horas de trabajo">
                <div
                  class="mb-4 d-flex justify-content-start align-items-center contenedor-disponible">
                  <span>Alta</span>
                  <input class="disponible" type="checkbox" name="alta" />
                </div>
                <div
                  class="mb-4 d-flex justify-content-start align-items-center contenedor-disponible">
                  <span>terminoCliente</span>
                  <input class="disponible" type="checkbox" name="terminoCliente" />
                </div>
                <div
                  class="mb-4 d-flex justify-content-start align-items-center contenedor-disponible">
                  <span>terminoProveedor</span>
                  <input class="disponible" type="checkbox" name="terminoProveedor" />
                </div>
                <div
                  class="mb-4 d-flex justify-content-start align-items-center contenedor-disponible">
                  <span>estaAceptadoCliente</span>
                  <input class="disponible" type="checkbox" name="estaAceptadoCliente" />
                </div>
            </div>
            <aside>
              <input type="date" name="calendario" id="calendario">
              <input type="text">
              <button type="submit" class="btn btn-primary mt-3"> Aceptar </button>
              <button type="submit" class="btn btn-primary mt-3"> Actualizar </button>
  
            </aside>                
        </form>  
        </div>
        <div class="col-1"></div>
        <div class="col-5">
          
        
        
          <div class="my-3">
              <!-- <label class="mb-2">Usuario Id</label>
              <b th:text="${usuario.id}"></b></label><br> -->
                 
              

              <label class="mb-2">Titulo</label>
              <input type="text" class="form-control" name="tituloTrabajo" th:value="${trabajo.tituloTrabajo}">
              <label class="mb-2">Chat</label>
              <div name="chat" th:each="mensaje : ${mensajes}">
                <div th:text="${mensaje.fecha}">
            
                </div>
                <div th:text="${mensaje.texto}">

                </div>
                <div th:text="${mensaje.tipo}">

                </div>
              </div>
              <form action="/trabajo/enviarMensaje" method="POST">
                <input hidden name="idTrabajo" th:value="${trabajo.id}">
                <input hidden name="idProveedor" th:value="${trabajo.proveedor.id}">
                <input type="text" placeholder="Enviar Mensaje" name="mensaje" id="mensaje">
                <button type="submit" class="btn btn-primary mt-3">Enviar Mensaje</button>
              </form>
          </div>               
      
        </div>
       </div>
        
      </div>
  </div> 

  </main>

  <th:footer th:replace="./fragments/footer.html :: footer"></th:footer>
  <script src="./js/bootstrap.bundle.min.js"></script>
</body>
</html>
